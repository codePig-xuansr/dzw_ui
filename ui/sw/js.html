<!DOCTYPE html>
<html>

	<head>
		<meta charset="UTF-8">
		<title></title>

		<style>
			.el-row {
				margin-bottom: 20px;
				&:last-child {
					margin-bottom: 0;
				}
			}
			
			.el-col {
				border-radius: 4px;
			}
			
			.bg-purple-dark {
				background: #FAF8F6;
			}
			
			.bg-purple {
				background: #FAF8F6;
			}
			
			.bg-purple-light {
				background: #FAF8F6;
			}
			
			.grid-content {
				border-radius: 4px;
				min-height: 36px;
			}
			
			.row-bg {
				padding: 10px 0;
				background-color: #FAF8F6;
			}
			
			.demo-table-expand {
				font-size: 0;
			}
			
			.demo-table-expand label {
				width: 90px;
				color: #99a9bf;
			}
			
			.demo-table-expand .el-form-item {
				margin-right: 0;
				margin-bottom: 0;
				width: 50%;
			}
		</style>
	</head>

	<body>
		<div id="JsVm">
			<el-row>
				<el-col :span="24">
					<div class="grid-content bg-purple-dark"></div>
				</el-col>
			</el-row>
			<el-row>
				<el-col :span="5" style="margin-left: 600px;">
					<div>
						<el-form label-width="80px">
							<el-form-item label="车牌号">
								<el-input v-model="input"></el-input>
							</el-form-item>
						</el-form>
					</div>
				</el-col>
				<el-col :span="3">
					<div>
						<el-button type="primary" icon="el-icon-search">搜索</el-button>
					</div>
				</el-col>
				<el-col :span="4" style="margin-left: 200px;">
					<div>
						<el-form label-width="80px">
							<el-form-item label="结算状态">
								<el-select v-model="check" placeholder="请选择" @change="query">
									<el-option label="未结算" value="1"></el-option>
									<el-option label="已结算" value="2"></el-option>
								</el-select>
							</el-form-item>
						</el-form>
					</div>
				</el-col>
			</el-row>

			<template>
				<el-table :data="js" style="width: 100%">
					<el-table-column type="expand">
						<template slot-scope="props">
							<el-form label-position="left" inline class="demo-table-expand">
								<el-form-item label="销售单号">
									<span>{{ props.row.rorder }}</span>
								</el-form-item>
								<el-form-item label="单据类型">
									<span>{{ props.row.orderType }}</span>
								</el-form-item>
								<el-form-item label="单据状态">
									<span>{{ props.row.status }}</span>
								</el-form-item>
								<el-form-item label="结算方式">
									<span>{{ props.row.clearing }}</span>
								</el-form-item>
								<el-form-item label="结算状态">
									<span v-if="props.row.statu==1">未结算</span>
									<span v-if="props.row.statu!=1">已结算<span>
								</el-form-item>
								<el-form-item label="结算时间">
									<span>{{ props.row.colsing }}</span>
								</el-form-item>
								<el-form-item label="结算金额">
									<span>{{ props.row.estimated }}</span>
								</el-form-item>
								<el-form-item label="业务类型">
									<span>{{ props.row.businessType }}</span>
								</el-form-item>
								<el-form-item label="客户名称">
									<span>{{ props.row.khname }}</span>
								</el-form-item>
								<el-form-item label="维修班组">
									<span>{{ props.row.wxgroup }}</span>
								</el-form-item>
								<el-form-item label="车牌号">
									<span>{{ props.row.carHno }}</span>
								</el-form-item>
								<el-button type="success" icon="el-icon-check" @click="js1(props.row.rorder)" circle v-if="props.row.statu==1">结算</el-button>
							</el-form>
							<el-button type="text" @click="cx1( props.row.rorder)">费用明细</el-button>
							<el-dialog title="提示" :visible.sync="isShow1" width="30%" :before-close="handleClose">
								<h4 class="modal-title">费用明细</h4>
								<small class="font-bold">销售单号:{{props.row.rorder}}</small>
								<h5 class="font-bold">客户名：{{props.row.khname}} 客户级别：{{vip}} 客户折扣：{{vipzk}}</h5>
								<p class="font-bold">车牌号码&nbsp;&nbsp;&nbsp;&nbsp;{{props.row.carHno}}</p>
								<p class="font-bold">该小组维修 工时费:{{gsf}}</p>
								<p class="font-bold">当前消耗工时:&nbsp;&nbsp;&nbsp;{{gs}}</p>
								<p class="font-bold">共消费&nbsp;&nbsp;&nbsp;{{gxf}}</p>
								<p style="color: #999999; size: 5px;">计算方式：(小组工时费×共消耗工时)×客户折扣</p>
								<p></p>
								<template>
									<el-table :data="xm" style="width: 100%">
										<el-table-column prop="xmName" label="维修项目" width="180">
										</el-table-column>
										<el-table-column prop="wxgroup" label="维修班组" width="180">
										</el-table-column>
										<el-table-column prop="orderTime" label="开单时间">
										</el-table-column>
									</el-table>
								</template>
								<span slot="footer" class="dialog-footer">
                          <el-button @click="isShow1 = false">取 消</el-button>
                     <el-button type="primary" @click="isShow1 = false">确 定</el-button>
                          </span>
							</el-dialog>
						</template>
					</el-table-column>
					<el-table-column label="销售单号" prop="rorder">
					</el-table-column>
					<el-table-column label="进厂时间" prop="colsin">
					</el-table-column>
					<el-table-column label="完工时间" prop="colsing">
					</el-table-column>
					<el-table-column label="车牌号" prop="carHno">
					</el-table-column>
					<el-table-column label="结算状态" prop="statu">
						<template slot-scope="scope">{{ scope.row.statu==1?'未结算':'已结算' }}</template>
					</el-table-column>
				</el-table>
			</template>
		</div>

	</body>
	<script>
		function getNow(s) {
			return s < 10 ? '0' + s : s;
		}
		var JsVm = new Vue({
			el: '#JsVm',
			data: {
				check: "未结算",
				js: [{
					rorder: "2121",
					colsin: "2012-12-11",
					colsing: "2012-12-12",
					carHno: "湘B23121",
					orderType: "完全",
					status: "撒大",
					statu: 2,
					estimated: 433,
					businessType: "撒打算",
					khname: "朱小鹏",
					wxgroup: "一班",
					clearing: "现金"
				}, {
					rorder: "2121",
					colsin: "2012-12-11",
					colsing: "2012-12-12",
					carHno: "湘B23121",
					orderType: "完全",
					status: "撒大",
					statu: 1,
					estimated: 433,
					businessType: "撒打算",
					khname: "朱小鹏",
					wxgroup: "一班",
					clearing: "现金"
				}],
				isShow1: false,
				input: '',
				xm: [],
				vip: "会员",
				vipzk: "23121",
				gsf: "12",
				gs: "21",
				gxf: "323"
			},
			methods: {
				query() {
					console.info(this.check);
				},
				cx1(id) {
					this.isShow1 = true
				},
				handleClose(done) {
					this.$confirm('确认关闭？')
						.then(_ => {
							done();
						})
						.catch(_ => {});
				},
			}
		});
	</script>

</html>